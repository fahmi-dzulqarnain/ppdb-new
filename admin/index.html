<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="shortcut icon" href="../assets/img/Yayasan Islam Al Kahfi Batam@2x.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <link rel='stylesheet' href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css'>
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link rel="stylesheet" href="../main_css/root.css">
    <link rel="stylesheet" href="../main_css/material_design.css">
    <link rel="stylesheet" href="../main_css/modal.css">
    <link rel="stylesheet" href="beranda_admin.css?v=5">
</head>

<body>
    <div id="sidebar"></div>
    <section class="beranda display-none" id="beranda">
        <div class="kurung">
            <div class="text" style="margin-left: 30px;">Beranda</div>
            <div>
                <div class="flex-row-wrap padding-card-botton">
                    <div class="card">
                        <div class="box">
                            <div id="txtCountPendaftar" class="text-number" style="margin-right: 2rem;">0</div>
                            <div class="text-card">
                                <i class="fa-solid fa-user-group" style="margin-bottom: 10px;"></i><br>Pendaftar
                            </div>
                        </div>
                    </div>
                    <div class="card card-color-lulus">
                        <div class="box">
                            <div id="txtCountDibayar" class="text-number"
                                style="margin-right: 2rem;flex-wrap: initial;display: inherit;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-square-check" style="margin-bottom: 10px;"></i><br>Dibayar
                            </div>
                        </div>
                    </div>
                    <div class="card card-color-perlu-aksi">
                        <div class="box">
                            <div id="txtCountMenungguKonfirmasi" class="text-number" style="margin-right: 2rem;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-triangle-exclamation" style="margin-bottom: 10px;"></i><br>
                                Konfirmasi
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="box">
                            <div id="txtCountLulusTes" class="text-number" style="margin-right: 2rem;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-school-circle-check" style="margin-bottom: 10px;"></i><br>
                                Lulus Tes
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="box">
                            <div id="txtCountLulus" class="text-number" style="margin-right: 2rem;">0</div>
                            <div class="text-card">
                                <i class="fa-solid fa-building-circle-check" style="margin-bottom: 10px;"></i><br>Lulus
                            </div>
                        </div>
                    </div>
                    <div class="card card-color-lulus">
                        <div class="box">
                            <div id="txtCountBersyarat" class="text-number"
                                style="margin-right: 2rem;flex-wrap: initial;display: inherit;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-envelope-circle-check"
                                    style="margin-bottom: 10px;"></i><br>Bersyarat
                            </div>
                        </div>
                    </div>
                    <div class="card card-color-perlu-aksi">
                        <div class="box">
                            <div id="txtCountCadangan" class="text-number" style="margin-right: 2rem;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-school-circle-exclamation" style="margin-bottom: 10px;"></i><br>
                                Cadangan
                            </div>
                        </div>
                    </div>
                    <div class="card bg-red">
                        <div class="box">
                            <div id="txtCountBelumDiterima" class="text-number" style="margin-right: 2rem;">0
                            </div>
                            <div class="text-card">
                                <i class="fa-solid fa-school-circle-xmark" style="margin-bottom: 10px;"></i><br>
                                Blm Diterima
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="modal__container" id="modal-container">
        <div class="modal__content" title="Close">
            <i class="bx bx-x modal__close close-modal"></i>

            <div style="width: 100px; margin: 24px auto;" class="lottie-size">
                <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_bdnjxekx.json"
                    background="transparent" speed="1" loop autoplay></lottie-player>
            </div>

            <h3 id="titleDialog">TKIT Fajar Ilahi</h3>
            <p id="descriptionDialog">Silakan Pilih Tipe Kelas</p>

            <button type="button" class="modal__button-link close-modal">
                Close
            </button>
        </div>
    </div>

    <section class="fokus-sisi-tengah display-mobile disappeared">
        <div style="text-align: -webkit-center;">
            <div class="akses_lewat_laptop"></div>
            <h1>Mohon Maaf</h1>
            <p>Halaman ini hanya mendukung akses melalui komputer/laptop</p>
        </div>
    </section>

    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script src="../includes/public-function.js?v=2"></script>
    <script src="../main_js/script.js"></script>
    <script src="../main_js/open_close_dialog.js"></script>
    <script src="../main_js/admin_sidebar.js"></script>
    <script src="../main_js/report.js?v=9"></script>
    <script>
        const request = new XMLHttpRequest()
        const accessToken = localStorage.getItem('accessToken')

        if (accessToken == null) {
            signOut()
        }

        request.onload = function () {
            const response = JSON.parse(request.responseText)
            const statusCode = response.statusCode

            if (statusCode == 401) {
                signOut()
            } else if (statusCode != 200) {
                const title = response.error
                const messages = response.message

                attachToView('titleDialog', title)
                attachToView('descriptionDialog', messages)
                openDialog()
            } else {
                const data = response.data

                attachToView('txtCountPendaftar', data.pendaftar)
                attachToView('txtCountDibayar', data.dibayar)
                attachToView('txtCountMenungguKonfirmasi', data.menungguKonfirmasi)
                attachToView('txtCountLulusTes', data.lulusTesAkademik)
                attachToView('txtCountLulus', data.lulus)
                attachToView('txtCountBersyarat', data.lulusBersyarat)
                attachToView('txtCountCadangan', data.cadangan)
                attachToView('txtCountBelumDiterima', data.belumDiterima)
            }
        }

        request.open('GET', `${mainURL}registrasi/statusCount`)
        request.setRequestHeader('Authorization', `Bearer ${accessToken}`)
        request.send()
    </script>
</body>

</html>